addEvent(window,"load",reorder_init);var lis;var top=0;var left=0;var height=30;function reorder_init(){lis=document.getElementsBySelector("ul#orderthese li");var d=document.getElementsBySelector("input[name=order_]")[0];setOrder(d.value.split(","));d.disabled=true;draw();var b=(lis.length-1)*height;for(var e=0;e<lis.length;e++){var a=lis[e];var c=document.getElementById("handle"+a.id);a.style.zIndex=1;Drag.init(c,a,left+10,left+10,top+10,top+10+b);a.onDragStart=startDrag;a.onDragEnd=endDrag;c.style.cursor="move"}}function submitOrderForm(){var a=document.getElementsBySelector("input[name=order_]")[0];a.value=getOrder();a.disabled=false}function startDrag(){this.style.zIndex="10";this.className="dragging"}function endDrag(a,d){this.style.zIndex="1";this.className="";var c=this.index;var b=Math.round((d-10-top)/height);this.style.top=(10+top+b*height)+"px";this.index=b;moveItem(c,b)}function moveItem(g,c){if(g==c){return}var f,d,a;if(c>g){d=g;a=c;f=-1}else{f=1;a=g;d=c}var e=new Array();for(var b=0;b<lis.length;b++){if(b<d||b>a){e[b]=lis[b];continue}else{if(b==c){e[b]=lis[g];continue}else{e[b]=lis[b-f]}}}reIndex(e);lis=e;draw();document.getElementsBySelector("input[name=order_]")[0].value=getOrder()}function reIndex(a){for(var b=0;b<a.length;b++){a[b].index=b}}function draw(){for(var b=0;b<lis.length;b++){var a=lis[b];a.index=b;a.style.position="absolute";a.style.left=(10+left)+"px";a.style.top=(10+top+(b*height))+"px"}}function getOrder(){var a=new Array(lis.length);for(var b=0;b<lis.length;b++){a[b]=lis[b].id.substring(1,100)}return a.join(",")}function setOrder(b){var c=new Array();for(var a=0;a<b.length;a++){var d="p"+b[a];c[c.length]=document.getElementById(d)}reIndex(c);lis=c;draw()}function addEvent(e,d,b,a){if(e.addEventListener){e.addEventListener(d,b,a);return true}else{if(e.attachEvent){var c=e.attachEvent("on"+d,b);return c}else{e["on"+d]=b}}};